<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Software ninja - Plot one-way delays with mptcpanalyzer</title>
        <link rel="stylesheet" href="../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Ninja hacking</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Plot one-way delays with mptcpanalyzer</h1>
            <article>
    <section class="header">
    Posted on January  2, 2022
    
        by Matt
    
    </section>
    <section>
    
    Tags: <a title="All pages tagged 'mptcp'." href="../tags/mptcp.html">mptcp</a>, <a title="All pages tagged 'mptcpanalyzer'." href="../tags/mptcpanalyzer.html">mptcpanalyzer</a>
    
    </section>
    <section>
<p><a href="https://github.com/ngi-mptcp/mptcpanalyzer/mptcpanalyzer">mptcpanalyzer</a> has a unique capability (at least in the FOSS world, to the best of my knowledge) where it is capable of mapping packets from 2 pcaps (server and client) together. Considering the clocks at both hosts are syntonized/in sync, one can deduce properties like one-way delays (OWD), also called one-trip time (OTT), to match the Round-Trip time (RTT) expression.</p>
<pre><code>&gt; map-tcp examples/client_2_filtered.pcapng examples/server_2_filtered.pcapng 0
Score for connection 10.0.0.1:33782 -&gt; 10.0.0.2:5201 (tcp.stream: 0): 40
Score for connection 10.0.0.1:33784 -&gt; 10.0.0.2:5201 (tcp.stream: 1): 30
Score for connection 10.0.0.1:54595 -&gt; 11.0.0.2:5201 (tcp.stream: 2): 20
Score for connection 10.0.0.1:57491 -&gt; 11.0.0.2:5201 (tcp.stream: 3): 20
Score for connection 11.0.0.1:35589 -&gt; 10.0.0.2:5201 (tcp.stream: 6): 20
Score for connection 11.0.0.1:50007 -&gt; 10.0.0.2:5201 (tcp.stream: 7): 20
Score for connection 11.0.0.1:50077 -&gt; 11.0.0.2:5201 (tcp.stream: 5): 10
Couldn't compute score for tcp.stream  &quot;No packet with any SYN flag for tcp.stream StreamId 4&quot;</code></pre>
<p>Similar with MPTCP, mptcpanalyzer will compute a score and displays the possible mappings in decreasing order</p>
<pre><code>map-mptcp examples/client_2_filtered.pcapng examples/server_2_filtered.pcapng 0
Score for connection StreamId 0: 200
Server key/token: 10048458395084872514/2846245513
Client key/token: 17227928701987094984/4093186044

Subflows:
10.0.0.1:33782 -&gt; 10.0.0.2:5201 (tcp.stream: 0)
10.0.0.1:54595 -&gt; 11.0.0.2:5201 (tcp.stream: 2)
11.0.0.1:35589 -&gt; 10.0.0.2:5201 (tcp.stream: 6)


Score for connection StreamId 1: 0
Server key/token: 14803550490012999960/1015310287
Client key/token: 2708191410426849018/3188734930

Subflows:
10.0.0.1:33784 -&gt; 10.0.0.2:5201 (tcp.stream: 1)
10.0.0.1:57491 -&gt; 11.0.0.2:5201 (tcp.stream: 3)
11.0.0.1:50007 -&gt; 10.0.0.2:5201 (tcp.stream: 7)
11.0.0.1:50077 -&gt; 11.0.0.2:5201 (tcp.stream: 5)</code></pre>
<p>Once</p>
<pre><code>plot-tcp --display owd examples/client_2_filtered.pcapng 0 examples/server_2_filtered.pcapng 0</code></pre>
<p>which produces: <img src="../images/mptcp/tcp-owd-stream-0.png" alt="One-Way delays for stream 0" /></p>
<p>Same can be done for MPTCP with:</p>
<pre><code>plot-mptcp --display owd examples/client_2_filtered.pcapng 0 examples/server_2_filtered.pcapng 0</code></pre>
    </section>
</article>

        </main>

        <footer>
            Site generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
